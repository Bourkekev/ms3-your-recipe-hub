{% extends 'base.html' %}
{% block title %}Results for {{ query }} {{ category }}{{ course_name }} Recipes - {% endblock %}

{% block content %}
<div class="title-panel">
    <div class="container">
        <div class="row">
            <h1 class="page-title text-center text-sm-left page-title">
                {% if query is defined %}
                    Results for '{{ query }}'
                {% else %}
                    All {{ category }}{{ course_name }} Recipes
                {% endif %}
            </h1>
        </div>
    </div>
</div>
{% include 'layout/flash-messages.html' %}
<div class="container">
    <!-- back to search -->
        <div class="row">
            <div class="col s12">
                <a href="{{ url_for('all_recipes') }}" class="waves-effect waves-dark btn red">Back to search</a>
            </div>
        </div>
    
    {% if recipes|length  > 0 %}
        <div class="row">
            {% for recipe in recipes %}
                <div class="col m6 l4">
                    <div class="card blue-grey lighten-5">
                        <div class="card-image">
                            {% if recipe.image_url %}
                                <img src="{{recipe.image_url}}" alt="{{recipe.title}}"/>
                            {% else %}
                                <picture>
                                <source media="(max-width: 480px)" 
                                srcset="{{url_for('static', filename='images/recipe-no-image-480x320.jpg')}}">
                                <img src="{{url_for('static', filename='images/recipe-no-image-843x562.jpg')}}" alt="no image available"/>
                                </picture>
                            {% endif %}
                        </div>
                        <div class="card-content">
                            <h2 class="card-title">{{recipe.title}}</h2>
                            <div class="row">
                                <div class="col s4"><span class="mdi small prefix mdi-pasta"></span>{{recipe.course_name}}</div>
                                <div class="col s4"><i class="small material-icons">access_time</i>{{recipe.total_time}}</div>
                                <div class="col s4"><i class="small material-icons">people</i>{{recipe.portions}}</div>
                            </div>

                            <p>{{recipe.short_description}}</p>
                            <a class="waves-effect waves-light btn-large" href="{{url_for('single_recipe', recipe_id=recipe._id)}}"><i class="material-icons right">chevron_right</i>View recipe</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="row">
            <div class="col s12"><p>No recipes found for that search term</p></div>
        </div>
    {% endif %}
</div>
{% endblock %}